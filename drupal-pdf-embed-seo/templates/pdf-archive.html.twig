{#
/**
 * @file
 * Template for displaying the PDF archive page.
 *
 * This template can be overridden by copying it to your theme:
 * yourtheme/templates/pdf-archive.html.twig
 *
 * Features:
 * - Supports list and grid display styles (configurable in settings)
 * - SEO optimized with Schema.org breadcrumb markup
 * - Fully accessible with ARIA labels and title attributes
 *
 * Available variables:
 * - documents: Array of rendered PDF archive items.
 * - pager: The pager render array.
 * - filters: Optional taxonomy filters (premium feature).
 * - display_style: 'list' or 'grid'.
 * - show_description: Whether to show descriptions.
 * - show_view_count: Whether to show view counts.
 * - archive_title: The archive page title.
 * - archive_description: The archive page description.
 * - site_name: The site name.
 * - site_url: The site homepage URL.
 * - archive_url: The archive page URL.
 * - content_alignment: Content alignment ('left', 'center', 'right').
 * - font_color: Custom font color (empty for theme default).
 * - background_color: Custom background color (empty for theme default).
 * - item_background_color: Background color for list/grid container.
 * - layout_width: 'boxed' or 'full-width'.
 * - attributes: HTML attributes for the container.
 */
#}

{# Build wrapper styles (applied to content-wrapper for seamless background) #}
{% set wrapper_styles = [] %}
{% if background_color %}
  {% set wrapper_styles = wrapper_styles|merge(['background-color: ' ~ background_color, 'padding: 20px', 'border-radius: 8px']) %}
{% endif %}
{% set wrapper_style_attr = wrapper_styles ? ' style="' ~ wrapper_styles|join('; ') ~ '"' : '' %}

{# Build inline styles for header (alignment and font color only - background on wrapper) #}
{% set header_styles = [] %}
{% if content_alignment %}
  {% set header_styles = header_styles|merge(['text-align: ' ~ content_alignment]) %}
{% endif %}
{% if font_color %}
  {% set header_styles = header_styles|merge(['color: ' ~ font_color]) %}
{% endif %}
{% set header_style_attr = header_styles ? ' style="' ~ header_styles|join('; ') ~ '"' : '' %}

{# Build list wrapper styles for alignment (uses flexbox to position the list block) #}
{% set list_wrapper_styles = [] %}
{% set list_justify = 'center' %}
{% if content_alignment == 'left' %}
  {% set list_justify = 'flex-start' %}
{% elseif content_alignment == 'right' %}
  {% set list_justify = 'flex-end' %}
{% endif %}
{% set list_wrapper_styles = list_wrapper_styles|merge(['justify-content: ' ~ list_justify]) %}
{% set list_wrapper_style_attr = list_wrapper_styles ? ' style="' ~ list_wrapper_styles|join('; ') ~ '"' : '' %}

{# Build list nav styles (colors only - alignment handled by wrapper) #}
{% set list_nav_styles = [] %}
{% if font_color %}
  {% set list_nav_styles = list_nav_styles|merge(['color: ' ~ font_color]) %}
{% endif %}
{% if item_background_color %}
  {% set list_nav_styles = list_nav_styles|merge(['background-color: ' ~ item_background_color]) %}
{% endif %}
{% set list_nav_style_attr = list_nav_styles ? ' style="' ~ list_nav_styles|join('; ') ~ '"' : '' %}

{# Build grid justify-content based on alignment #}
{% set grid_justify = 'center' %}
{% if content_alignment == 'left' %}
  {% set grid_justify = 'flex-start' %}
{% elseif content_alignment == 'right' %}
  {% set grid_justify = 'flex-end' %}
{% endif %}
{% set grid_styles = ['justify-content: ' ~ grid_justify] %}
{% set grid_style_attr = grid_styles ? ' style="' ~ grid_styles|join('; ') ~ '"' : '' %}

{# Container classes #}
{% set archive_classes = ['pdf-embed-seo-archive'] %}
{% if layout_width == 'full-width' %}
  {% set archive_classes = archive_classes|merge(['pdf-embed-seo-archive-full-width']) %}
{% endif %}

{# Breadcrumb Schema.org markup #}
<script type="application/ld+json">
{
	"@context": "https://schema.org",
	"@type": "BreadcrumbList",
	"itemListElement": [
		{
			"@type": "ListItem",
			"position": 1,
			"name": {{ site_name|json_encode|raw }},
			"item": {{ site_url|json_encode|raw }}
		},
		{
			"@type": "ListItem",
			"position": 2,
			"name": {{ archive_title|json_encode|raw }},
			"item": {{ archive_url|json_encode|raw }}
		}
	]
}
</script>

<div{{ attributes.addClass(archive_classes) }}>
  {# Visible breadcrumb navigation (JSON-LD schema is always output above for SEO) #}
  {% if show_breadcrumbs %}
    <nav class="pdf-embed-seo-breadcrumb" aria-label="{{ 'Breadcrumb'|t }}">
      <ol class="pdf-embed-seo-breadcrumb-list">
        <li class="pdf-embed-seo-breadcrumb-item">
          <a href="{{ site_url }}" title="{{ 'Go to %site homepage'|t({'%site': site_name}) }}">
            {{ site_name }}
          </a>
        </li>
        <li class="pdf-embed-seo-breadcrumb-item pdf-embed-seo-breadcrumb-current" aria-current="page">
          {{ archive_title }}
        </li>
      </ol>
    </nav>
  {% endif %}

  <div class="pdf-embed-seo-archive-content-wrapper"{{ wrapper_style_attr|raw }}>
    <header class="pdf-embed-seo-archive-header"{{ header_style_attr|raw }}>
      <h1 class="pdf-embed-seo-archive-title">{{ archive_title }}</h1>
      {% if archive_description %}
        <div class="pdf-embed-seo-archive-description">
          <p>{{ archive_description }}</p>
        </div>
      {% endif %}
    </header>

    {% if filters is defined and filters %}
      <div class="pdf-embed-seo-filters-wrapper">
        {{ filters }}
      </div>
    {% endif %}

    {% if documents %}
      {% if display_style == 'list' %}
        {# List View - Simple accessible list #}
        <div class="pdf-embed-seo-list-wrapper"{{ list_wrapper_style_attr|raw }}>
          <nav class="pdf-embed-seo-list-nav"{{ list_nav_style_attr|raw }} aria-label="{{ 'PDF Documents List'|t }}">
            <ul class="pdf-embed-seo-list" role="list">
              {% for item in documents %}
                {{ item }}
              {% endfor %}
            </ul>
          </nav>
        </div>{# End .pdf-embed-seo-list-wrapper #}
      {% else %}
        {# Grid View - Card layout with thumbnails #}
        <section class="pdf-embed-seo-grid"{{ grid_style_attr|raw }} aria-label="{{ 'PDF Documents Gallery'|t }}">
          {% for item in documents %}
            {{ item }}
          {% endfor %}
        </section>
      {% endif %}

      {% if pager %}
        <nav class="pdf-embed-seo-pagination" aria-label="{{ 'PDF Documents pagination'|t }}">
          {{ pager }}
        </nav>
      {% endif %}
    {% else %}
      <div class="pdf-embed-seo-no-results" role="status">
        <p>{{ 'No PDF documents have been published yet.'|t }}</p>
      </div>
    {% endif %}
  </div>{# End .pdf-embed-seo-archive-content-wrapper #}
</div>
